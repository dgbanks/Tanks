{"version":3,"sources":["webpack:///webpack/bootstrap 073e7f9c249cf69d534e","webpack:///./lib/bullet.js","webpack:///./lib/tanks.js","webpack:///./lib/game.js","webpack:///./lib/barrier.js","webpack:///./lib/tank.js","webpack:///./lib/game_view.js","webpack:///(webpack)/buildin/global.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACvCA;AACA;;AAEA;AACA;AACA;;AAEA,yBAAyB,0CAA0C;AACnE;AACA,CAAC;;;;;;;ACTD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;;;;;;;ACpIA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;ACvBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,wCAAwC;;AAEvE;AACA;AACA;;AAEA;;;;;;;ACrDA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4CAA4C,wBAAwB;;AAEpE;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;ACvEA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 073e7f9c249cf69d534e","class Bullet {\n  constructor(posObject) {\n    this.pos = posObject.tankPos;\n    this.mousePos = posObject.mousePos;\n    this.speed = 5;\n    this.slope = this.calcSlope();\n  }\n\n  calcSlope() {\n    let slope = [(this.mousePos[0] - this.pos[0]),\n                (this.mousePos[1] - this.pos[1])];\n\n    if (Math.abs(slope[0]) >= Math.abs(slope[1])) {\n      slope = [(slope[0] / Math.abs(slope[0])),\n              (slope[1] / Math.abs(slope[0]))];\n    } else {\n      slope = [(slope[0] / Math.abs(slope[1])),\n              (slope[1] / Math.abs(slope[1]))];\n    }\n\n    return slope;\n  }\n\n  move() {\n    let slope = this.slope;\n\n    slope = [(slope[0] * this.speed), (slope[1] * this.speed)];\n    this.pos = [(this.pos[0] + slope[0]), (this.pos[1] + slope[1])];\n    // console.log(this.pos);\n  }\n\n  draw(ctx) {\n    ctx.fillStyle = 'white';\n    ctx.beginPath();\n    ctx.arc(this.pos[0], this.pos[1], 5, 0, (2 * Math.PI), false);\n    ctx.fill();\n  }\n}\n\nmodule.exports = Bullet;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/bullet.js\n// module id = 0\n// module chunks = 0","const Game = require('./game.js');\nconst GameView = require('./game_view');\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n  const canvas = document.getElementById('game-map');\n  const context = canvas.getContext('2d');\n\n  const game = new Game({dimensions: [canvas.width, canvas.height]});\n  new GameView(game, context, canvas).start();\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/tanks.js\n// module id = 1\n// module chunks = 0","const Barrier = require('./barrier');\nconst Tank = require('./tank');\nconst Bullet = require('./bullet');\n\nclass Game {\n  constructor(canvas) {\n    this.dimensions = canvas.dimensions;\n    this.tanks = [];\n    this.bullets = [];\n    this.barriers = [];\n  }\n\n  addTank() {\n    const tank = new Tank(this);\n    this.tanks.push(tank);\n    this.playerTank = tank;\n    return tank;\n  }\n\n  addBullet(bullet) {\n    this.bullets.push(bullet);\n    return bullet;\n  }\n\n  getBarriers() {\n    const boundaries = [\n      new Barrier(0, 0, 800, 10),\n      new Barrier(0, 590, 800, 10),\n      new Barrier(0, 10, 10, 580),\n      new Barrier(790, 10, 10, 580)\n    ];\n\n    const startingCover = [\n      new Barrier(100, 250, 20, 100),\n      new Barrier(680, 250, 20, 100)\n    ];\n\n    const levelOne = [\n      new Barrier(390, 100, 20, 150),\n      new Barrier(390, 350, 20, 150)\n    ];\n\n    this.barriers = [].concat(boundaries, startingCover, levelOne);\n    return this.barriers;\n  }\n\n\n  getMovingObjects() {\n    return [].concat(this.tanks, this.bullets);\n  }\n\n  moveBullets() {\n    this.bullets.forEach(bullet => {\n      bullet.move();\n      // console.log('moveBullets', bullet.pos, bullet.speed);\n          this.getBarriers().forEach(barrier => {\n              if ((\n                bullet.pos[0] > barrier.sides.left &&\n                bullet.pos[0] < barrier.sides.right\n              ) && (\n                bullet.pos[1] > barrier.sides.top &&\n                bullet.pos[1] < barrier.sides.bottom\n              )) {\n                console.log('collision!');\n              }\n          });\n    });\n  }\n\n  moveObjects(direction) {\n    this.getMovingObjects().forEach(object => {\n      if (object instanceof Tank) {\n        object.move(direction);\n        object.moveDirection = [0, 0];\n        this.getBarriers().forEach(barrier => {\n          // console.log('getBarriers');\n          // console.log(object.pos);\n          if ((\n            (object.pos[0] + (object.width / 2)) > barrier.sides.left &&\n            (object.pos[0] - (object.width / 2)) < barrier.sides.right\n          ) && (\n            (object.pos[1] + (object.width / 2)) > barrier.sides.top &&\n            (object.pos[1] - (object.width / 2)) < barrier.sides.bottom\n          )) {\n            console.log('collision!');\n          }\n        });\n      } else {\n        object.move();\n        this.getBarriers().forEach(barrier => {\n          if ((\n            object.pos[0] > barrier.sides.left &&\n            object.pos[0] < barrier.sides.right\n          ) && (\n            object.pos[1] > barrier.sides.top &&\n            object.pos[1] < barrier.sides.bottom\n          )) {\n            console.log('collision!');\n          }\n        });\n      }\n    });\n  }\n\n  drawEverything(ctx, mouseObject) {\n    // render the canvas\n    ctx.clearRect(0, 0, this.dimensions[0], this.dimensions[1]);\n    ctx.fillStyle = 'black';\n    ctx.fillRect(0, 0, this.dimensions[0], this.dimensions[1]);\n\n    // render barriers and boundaries\n    this.getBarriers().forEach(barrier => {\n      barrier.draw(ctx);\n    });\n\n    // render moving objects\n    this.getMovingObjects().forEach(object => {\n      object.draw(ctx);\n    });\n\n    // render the player's aim\n    ctx.beginPath();\n    ctx.moveTo(this.playerTank.pos[0], this.playerTank.pos[1]);\n    ctx.lineTo(mouseObject.mousePos[0], mouseObject.mousePos[1]);\n    ctx.strokeStyle = 'white';\n    ctx.stroke();\n  }\n\n\n\n}\n\nmodule.exports = Game;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game.js\n// module id = 2\n// module chunks = 0","class Barrier {\n\n  constructor(xPos, yPos, width, height) {\n    this.xPos = xPos;\n    this.yPos = yPos;\n    this.width = width;\n    this.height = height;\n\n    this.sides = {\n      top: this.yPos,\n      right: (this.xPos + this.width),\n      bottom: (this.yPos + this.height),\n      left: this.xPos\n    };\n  }\n\n  draw(ctx) {\n    ctx.fillStyle = 'red';\n    ctx.fillRect(this.xPos, this.yPos, this.width, this.height);\n  }\n\n}\n\nmodule.exports = Barrier;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/barrier.js\n// module id = 3\n// module chunks = 0","const Bullet = require('./bullet');\n\nclass Tank {\n  constructor(game) {\n    this.pos = [45, 300];\n    this.game = game;\n    this.moveDirection = [0, 0];\n    this.width = 50;\n    // this.sides = {\n    //   top: this.pos[1] - (this.width / 2),\n    //   right: this.pos[0] + (this.width / 2),\n    //   bottom: this.pos[1] + (this.width / 2),\n    //   left: this.pos[0] - (this.width / 2)\n    // };\n  }\n\n  draw(ctx) {\n    // tank radius\n    ctx.strokeStyle = 'white';\n    ctx.beginPath();\n    ctx.arc(this.pos[0], this.pos[1], 35, 0, (2 * Math.PI), false);\n    ctx.stroke();\n\n    // tank body\n    ctx.fillStyle = 'blue';\n    ctx.fillRect((this.pos[0] - (this.width / 2)), (this.pos[1] - (this.width / 2)), this.width, this.width);\n\n    // tank center\n    ctx.fillStyle = 'white';\n    ctx.beginPath();\n    ctx.arc(this.pos[0], this.pos[1], 5, 0, (2 * Math.PI), false);\n    ctx.fill();\n\n    // tank cannon\n    ctx.fillStyle = 'white';\n    ctx.fillRect(this.pos[0],(this.pos[1] - 2.5), 35, 5);\n\n  }\n\n  move(direction) {\n    direction = [(direction[0] * 5), (direction[1] * 5)];\n    this.pos = [(this.pos[0] + direction[0]), (this.pos[1] + direction[1])];\n    // console.log(this.pos);\n    // console.log(this.sides);\n  }\n\n  fire(mousePos) {\n    const bullet = new Bullet({ mousePos: mousePos, tankPos: this.pos });\n\n    this.game.addBullet(bullet);\n  }\n}\n\nmodule.exports = Tank;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/tank.js\n// module id = 4\n// module chunks = 0","class GameView {\n\n  constructor(game, context, canvas) {\n    this.game = game;\n    this.context = context;\n    this.canvas = canvas;\n    this.mousePos = [400, 300];\n    this.tank = this.game.addTank();\n\n    this.setMousePosition = this.setMousePosition.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  listenForMouse() {\n    this.canvas.addEventListener('mousemove', this.setMousePosition);\n  }\n\n  setMousePosition(event) {\n    this.mousePos = [event.clientX, event.clientY];\n  }\n\n  listenForClick() {\n    this.canvas.addEventListener('click', this.handleClick);\n  }\n\n  handleClick() {\n    // console.log(this.mousePos);\n    this.tank.fire(this.mousePos);\n  }\n\n  bindKeys() {\n    // console.log('bindkey');\n    const tank = this.tank;\n\n    Object.keys(GameView.MOVES).forEach((k) => {\n      // console.log('inside foreach');\n      let direction = GameView.MOVES[k];\n      global.key(k, () => {\n        // console.log(tank);\n        // tank.move(direction);\n        tank.moveDirection = direction;\n        // console.log(tank);\n      });\n    });\n  }\n\n  start() {\n    this.bindKeys();\n\n    this.listenForMouse();\n    this.listenForClick();\n\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  animate() {\n    this.game.moveObjects(this.tank.moveDirection);\n    this.game.drawEverything(this.context, {mousePos: this.mousePos});\n\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n}\n\nGameView.MOVES = {\n  'w': [0, -1],\n  'a': [-1, 0],\n  's': [0, 1],\n  'd': [1, 0]\n};\n\nmodule.exports = GameView;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/game_view.js\n// module id = 5\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}